(this["webpackJsonpmeme-diary"]=this["webpackJsonpmeme-diary"]||[]).push([[0],{106:function(e,t,a){},107:function(e,t,a){},108:function(e,t,a){},109:function(e,t,a){},110:function(e,t,a){},111:function(e,t,a){},157:function(e,t,a){},158:function(e,t,a){},160:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),s=a(20),r=a.n(s),i=a(30),l=a(31),o=a(40),d=a(38),j=a(8),u=a(7),b=a(10),h=a(5),O=a(62),m=a(6),p=a(2);var f=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}))((function(e){var t=e.component,a=Object(O.a)(e,["component"]),n=a.isAuthenticated;return Object(p.jsx)(u.b,Object(h.a)(Object(h.a)({},a),{},{render:function(e){return n?Object(p.jsx)(t,Object(h.a)({},e)):Object(p.jsx)(u.a,{to:"/"})}}))})),x=a(9),v="ADD_DIARY",g="ADD_DIARY_FAIL",y="DELETE_DIARY",N="DIARY_LOADING",S="FETCH_DIARY_SUCCESS",A="GET_ERRORS",E="CLEAR_ERRORS",C="USER_LOADING",R="USER_LOADED",I="AUTH_ERROR",D="LOGIN_SUCCESS",L="LOGIN_FAIL",_="LOGOUT_SUCCESS",w="REGISTER_SUCCESS",k="REGISTER_FAIL",T=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return{type:A,payload:{msg:e,status:t,id:a}}},H=function(){return{type:E}},Y=a(65),G=a.n(Y).a.create({baseURL:"http://localhost:5000",headers:{"Content-type":"application/json"}}),U=function(e){var t=e.firstName,a=e.lastName,n=e.email,c=e.password;return function(e){var s=JSON.stringify({firstName:t,lastName:a,email:n,password:c});G.post("/api/user",s,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:w,payload:t.data})})).then((function(e){se.push("/")})).catch((function(t){e(T(t.response.data,t.response.status,"REGISTER_FAIL")),e({type:k})}))}},F=function(e){var t=e.email,a=e.password;return function(e){var n=JSON.stringify({email:t,password:a});G.post("/api/auth",n,{headers:{"Content-Type":"application/json"}}).then((function(t){return e({type:D,payload:t.data})})).catch((function(t){e(T(t.response.data,t.response.status,"LOGIN_FAIL")),e({type:L})}))}},M=function(e){var t=e().auth.token,a={headers:{"Content-type":"application/json"}};return t&&(a.headers["x-auth-token"]=t),a};a(106);var J=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{login:F,clearErrors:H})((function(e){var t=e.error,a=e.isAuthenticated,c=e.clearErrors,s=Object(n.useState)(""),r=Object(x.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(""),d=Object(x.a)(o,2),b=d[0],h=d[1],O=Object(n.useState)(null),f=Object(x.a)(O,2),v=f[0],g=f[1],y=Object(m.c)(),N=Object(u.g)();return Object(n.useEffect)((function(){"LOGIN_FAIL"===t.id?g(t.msg.msg):g(null),a&&(N.push("/home"),c())}),[t,a,c,N]),Object(p.jsxs)("div",{className:"login-container",children:[Object(p.jsx)("div",{className:"part",children:Object(p.jsx)("h1",{className:"title",children:"forMe."})}),Object(p.jsx)("div",{className:"part login",children:Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault(),y(F({email:i,password:b})),l(""),h("")},className:"sign-in-form",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h1",{children:"Log-in"})}),v?Object(p.jsx)("div",{className:"alert-login",children:v}):null,Object(p.jsxs)("div",{className:"login-form",children:[Object(p.jsx)("input",{className:"login-item",type:"email",placeholder:"Your E-mail",value:i,onChange:function(e){return l(e.target.value)}}),Object(p.jsx)("input",{className:"login-item",type:"password",placeholder:"Password",value:b,onChange:function(e){return h(e.target.value)}}),Object(p.jsx)("button",{className:"login-item",type:"submit",children:"Log In"}),Object(p.jsxs)("div",{className:"sign-up",children:[Object(p.jsx)("span",{children:"Don't have an account?"}),Object(p.jsx)(j.b,{to:"/register",children:Object(p.jsx)("button",{children:"Sign Up!"})})]})]})]})})]})}));a(107);var W=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,error:e.error}}),{register:U,clearErrors:H})((function(e){var t=e.error,a=e.clearErrors,c=e.isAuthenticated,s=Object(n.useState)(""),r=Object(x.a)(s,2),i=r[0],l=r[1],o=Object(n.useState)(""),d=Object(x.a)(o,2),u=d[0],b=d[1],h=Object(n.useState)(""),O=Object(x.a)(h,2),f=O[0],v=O[1],g=Object(n.useState)(""),y=Object(x.a)(g,2),N=y[0],S=y[1],A=Object(n.useState)(null),E=Object(x.a)(A,2),C=E[0],R=E[1],I=Object(m.c)();return Object(n.useEffect)((function(){"REGISTER_FAIL"===t.id?R(t.msg.msg):R(null),c&&a()}),[t,a,c]),Object(p.jsx)("div",{children:Object(p.jsx)("div",{className:"register-container",children:Object(p.jsxs)("form",{className:"register-form",onSubmit:function(e){e.preventDefault();var t={firstName:i,lastName:u,email:f,password:N};console.log(t),I(U(t)),l(""),b(""),v(""),S(""),R(null),e.target.reset()},children:[Object(p.jsx)("div",{className:"regi-title",children:Object(p.jsx)("h1",{children:"Register"})}),C?Object(p.jsx)("div",{className:"alert",children:C}):null,Object(p.jsxs)("div",{className:"regi-form",children:[Object(p.jsx)("input",{className:"regi-item",placeholder:"First Name",value:i,onChange:function(e){return l(e.target.value)}}),Object(p.jsx)("input",{className:"regi-item",placeholder:"Last Name",value:u,onChange:function(e){return b(e.target.value)}}),Object(p.jsx)("input",{className:"regi-item",type:"email",placeholder:"Your E-mail",value:f,onChange:function(e){return v(e.target.value)}}),Object(p.jsx)("input",{className:"regi-item",type:"password",placeholder:"Password",value:N,onChange:function(e){return S(e.target.value)}}),Object(p.jsx)("button",{className:"regi-btn",type:"submit",children:"Sign Up"}),Object(p.jsxs)("div",{className:"log-in",children:[Object(p.jsx)("span",{children:"Already registered?"}),Object(p.jsx)(j.b,{to:"/",children:Object(p.jsx)("button",{children:"Log-in"})})]})]})]})})})})),B=a(19);a(108);var P=Object(B.compose)(u.h,Object(m.b)(null,{logout:function(){return{type:_}}}))((function(e){var t=e.logout;return Object(p.jsxs)("div",{className:"nav-container",children:[Object(p.jsx)("section",{className:"main-section",children:Object(p.jsx)(j.b,{className:"nav-main",to:"/home",children:"forMe."})}),Object(p.jsxs)("section",{className:"item-section",children:[Object(p.jsx)("div",{children:Object(p.jsx)(j.b,{className:"nav-item",to:"/diaries/new",children:"NEW"})}),Object(p.jsx)("div",{children:Object(p.jsx)(j.b,{className:"nav-item",to:"/diaries",children:"YOUR STORY"})}),Object(p.jsx)("div",{children:Object(p.jsx)(j.b,{onClick:t,className:"log-out",to:"/",children:"LOG OUT"})})]})]})})),z=(a(109),function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){pe.dispatch((function(e,t){e({type:C}),G.get("/api/auth/user",M(t)).then((function(t){return e({type:R,payload:t.data})})).catch((function(t){e(T(t.response.data,t.response.status)),e({type:I})}))}))}},{key:"render",value:function(){return this.props.isAuthenticated?Object(p.jsxs)("div",{children:[Object(p.jsx)(P,{}),Object(p.jsxs)("div",{className:"home-container",children:[Object(p.jsx)("h1",{className:"title",children:"forMe."}),Object(p.jsx)("div",{className:"main-btn wrapper",children:Object(p.jsx)(j.b,{className:"btn",to:"/diaries/new",children:"Write Your Story!"})})]})]}):Object(p.jsx)(u.a,{to:"/"})}}]),a}(n.Component)),q=Object(m.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated,diaries:e.diaries.diaries}}))(z),K=a(66),Q=a.n(K),V=a(39),X=a(72);a(110);function Z(e){var t=e.totalHearts,a=e.selectedHeart,n=e.setSelectedHeart;return Object(p.jsx)("div",{children:Object(V.a)(Array(t)).map((function(e,t){return t+=1,Object(p.jsx)(X.a,{size:18,className:t<=a?"selectedHeart":"heart",onClick:function(){return n(t)}},t)}))})}var $=function(){return{type:N}},ee=function(e){return function(t,a){var n=JSON.stringify(e);console.log(n),G.post("/api/diary",n,M(a)).then((function(e){return t({type:v,payload:e.data})})).catch((function(e){t(T(e.response.data,e.response.status,"ADD_DIARY_FAIL")),t({type:g})}))}};a(111),a(112);var te=Object(m.b)((function(e){return{auth:e.auth}}),{addDiary:ee})((function(){var e=Object(m.d)((function(e){return e.auth.user._id})),t=Object(m.d)((function(e){return e.auth.user.firstName})),a=Object(n.useState)(0),c=Object(x.a)(a,2),s=c[0],r=c[1],i=Object(n.useState)(null),l=Object(x.a)(i,2),o=l[0],d=l[1],j=Object(n.useState)(""),b=Object(x.a)(j,2),h=b[0],O=b[1],f=Object(n.useState)(""),v=Object(x.a)(f,2),g=v[0],y=v[1],N=Object(n.useState)(""),S=Object(x.a)(N,2),A=S[0],E=S[1],C=function(e){E(e.target.value)},R=Object(m.c)(),I=Object(u.g)();return Object(p.jsxs)("div",{children:[Object(p.jsx)(P,{}),Object(p.jsxs)("form",{className:"form",onSubmit:function(t){t.preventDefault();var a={user_id:e,title:h,content:g,date:o,selectedHeart:s,bodyChecked:A};console.log(a),R(ee(a)),I.push("/diaries"),d(null),O(""),y(""),r(0),E(""),t.target.reset()},children:[Object(p.jsxs)("span",{className:"form-user",children:["For ",t,"."]}),Object(p.jsx)("h1",{className:"form-title",children:"How Are You Today? "}),Object(p.jsxs)("div",{className:"form-control",children:[Object(p.jsxs)("div",{className:"form-item",children:[Object(p.jsx)("label",{children:"Select Date"}),Object(p.jsx)(Q.a,{selected:o,onChange:function(e){return d(e)},placeholderText:"Choose a date"})]}),Object(p.jsxs)("div",{className:"form-item",children:[Object(p.jsx)("label",{children:"One Thing I Am Grateful For"}),Object(p.jsx)("input",{title:h,onChange:function(e){return O(e.target.value)},type:"text",placeholder:"Today.."})]}),Object(p.jsxs)("div",{className:"form-item",children:[Object(p.jsx)("label",{children:"Give Yourself Hearts"}),Object(p.jsx)("span",{children:"How many hearts would you give to yourself?"}),Object(p.jsx)("div",{className:"hearts",children:Object(p.jsx)(Z,{totalHearts:5,selectedHeart:s,setSelectedHeart:r})})]}),Object(p.jsxs)("div",{className:"form-item",children:[Object(p.jsx)("label",{children:"Treat Your Body Well?"}),Object(p.jsx)("span",{children:"Eat Healthy/ Meditation / Exercise "}),Object(p.jsxs)("div",{className:"checkbox",children:[Object(p.jsxs)("div",{className:"check-opt",children:[Object(p.jsx)("label",{children:"YES"}),Object(p.jsx)("input",{type:"radio",checked:"Yes"===A,value:"Yes",onChange:C})]}),Object(p.jsxs)("div",{className:"check-opt",children:[Object(p.jsx)("label",{children:"NO"}),Object(p.jsx)("input",{type:"radio",checked:"No"===A,value:"No",onChange:C})]})]})]}),Object(p.jsxs)("div",{className:"form-item",children:[Object(p.jsx)("label",{children:"Today I Feel "}),Object(p.jsx)("textarea",{content:g,onChange:function(e){return y(e.target.value)},name:"Content",placeholder:"Tell me about your day! What happened? How do you feel?",cols:"15",rows:"5"})]})]}),Object(p.jsx)("div",{className:"form-upload",children:Object(p.jsx)("button",{type:"submit",value:"Upload it!",className:"lg-btn",children:"Upload it!"})})]})]})})),ae=a(69),ne=a.n(ae);a(157);var ce=Object(m.b)((function(e){return{diaries:e.diaries.diaries,auth:e.auth}}),{getDiary:function(e){return function(t,a){t($()),G.get("/api/diary/".concat(e),M(a)).then((function(e){var a;t((a=e.data,{type:S,diaries:a}))})).catch((function(e){t(T(e.response.data,e.response.status))}))}},deleteDiary:function(e){return function(t,a){G.delete("/api/diary/delete/".concat(e),M(a)).then((function(a){return t({type:y,payload:e})})).catch((function(e){return t(T(e.response.data,e.response.status))}))}}})((function(e){var t=e.diaries,a=e.getDiary,c=e.deleteDiary,s=e.auth;return Object(n.useEffect)((function(){var e=s.user._id;if(e)return a(e)}),[a,s.user._id]),Object(p.jsxs)("div",{children:[Object(p.jsx)(P,{}),Object(p.jsxs)("div",{className:"diary-container",children:[Object(p.jsx)("h1",{className:"diary-title",children:"forMe."}),Object(p.jsx)("div",{children:t&&t.length?t.map((function(e){var t=e._id,a=e.title,n=e.content,s=e.date,r=e.selectedHeart,i=e.bodyChecked;return Object(p.jsx)("li",{children:Object(p.jsxs)("div",{className:"diary",children:[Object(p.jsxs)("div",{className:"diary-item",children:[Object(p.jsxs)("div",{className:"diary-grid",children:[Object(p.jsx)("div",{children:Object(p.jsx)("h2",{children:a})}),Object(p.jsx)("div",{className:"grid-flex",children:Object(p.jsx)(Z,{totalHearts:5,selectedHeart:r})})]}),Object(p.jsxs)("div",{className:"diary-grid",children:[Object(p.jsx)("div",{children:s?ne()(s).format("l"):null}),Object(p.jsxs)("div",{className:"grid-flex",children:[Object(p.jsx)("h4",{children:"Treat your body well?"}),Object(p.jsx)("p",{children:i})]})]})]}),Object(p.jsx)("div",{className:"diary-item",children:Object(p.jsx)("p",{children:n})}),Object(p.jsx)("div",{className:"diary-item",children:Object(p.jsx)("button",{onClick:function(){c(t)},className:"sm-btn",children:"Delete"})})]})},t)})):null})]})]})})),se=Object(b.a)({forceRefresh:!0});function re(){return Object(p.jsx)(j.a,{children:Object(p.jsxs)(u.d,{children:[Object(p.jsx)(u.b,{path:"/",exact:!0,component:J}),Object(p.jsx)(u.b,{history:se,path:"/register",component:W}),Object(p.jsx)(f,{path:"/home",component:q}),Object(p.jsx)(f,{path:"/diaries/new",component:te}),Object(p.jsx)(f,{path:"/diaries",component:ce})]})})}a(158);var ie=a(70),le=a(71),oe={diaries:[],loading:!1},de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return console.log(t),Object(h.a)(Object(h.a)({},e),{},{diaries:t.diaries,loading:!1});case y:return console.log(t),Object(h.a)(Object(h.a)({},e),{},{diaries:e.diaries.filter((function(e){return e._id!==t.payload}))});case v:return Object(h.a)(Object(h.a)({},e),{},{diaries:[t.payload].concat(Object(V.a)(e.diaries))});case g:return Object(h.a)({},e);case N:return Object(h.a)(Object(h.a)({},e),{},{loading:!0});default:return e}},je={token:localStorage.getItem("token"),isAuthenticated:null,isLoading:!1,user:null},ue={msg:{},status:null,id:null},be=Object(B.combineReducers)({diaries:de,auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:je,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(h.a)(Object(h.a)({},e),{},{isLoading:!0});case R:return Object(h.a)(Object(h.a)({},e),{},{isAuthenticated:!0,isLoading:!1,user:t.payload});case D:case w:return localStorage.setItem("token",t.payload.token),Object(h.a)(Object(h.a)(Object(h.a)({},e),t.payload),{},{isAuthenticated:!0,isLoading:!1});case L:case k:case _:case I:return localStorage.removeItem("token"),Object(h.a)(Object(h.a)({},e),{},{token:null,user:null,isAuthenticated:!1,isLoading:!1});default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return{msg:t.payload.msg,status:t.payload.status,id:t.payload.id};case E:return{msg:{},status:null,id:null};default:return e}}}),he={},Oe=[le.a],me=Object(ie.composeWithDevTools)({});var pe=Object(B.createStore)(be,he,me(B.applyMiddleware.apply(void 0,Oe))),fe=function(e){Object(o.a)(a,e);var t=Object(d.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return Object(p.jsx)(m.a,{store:pe,children:Object(p.jsx)(re,{})})}}]),a}(n.Component);r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(fe,{})}),document.getElementById("root"))}},[[160,1,2]]]);
//# sourceMappingURL=main.331e3702.chunk.js.map